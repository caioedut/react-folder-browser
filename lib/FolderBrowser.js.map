{"version":3,"sources":["../src/FolderBrowser.js"],"names":["propTypes","title","PropTypes","node","loading","deleting","uploading","error","empty","drop","exists","string","columnName","columnSize","columnPreview","columnActions","ignoreDuplicated","bool","buttonRefresh","shape","className","children","oneOfType","arrayOf","onClick","func","isRequired","buttonUpload","onChange","buttonDownload","download","buttonDelete","defaultProps","target","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","FolderBrowser","props","files","setFiles","modalFileUrl","setModalFileUrl","additionalColumns","_handleDrop","e","_handleChange","file","data","find","name","Array","from","window","confirm","value","_handleFocus","$el","currentTarget","$current","document","querySelector","classList","remove","add","filter","a","b","lastIndexOf","bind","stopPropagation","padding","length","map","column","key","header","isImage","some","ext","toLowerCase","endsWith","position","backgroundColor","overflow","height","width","url","cursor","objectFit","preventDefault","render","size"],"mappings":"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","sourcesContent":["import './styles.css';\n\nimport React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\n\nimport FileDrop from 'react-file-drop';\n\nexport const propTypes = {\n  title: PropTypes.node,\n  loading: PropTypes.node,\n  deleting: PropTypes.node,\n  uploading: PropTypes.node,\n  error: PropTypes.node,\n  empty: PropTypes.node,\n  drop: PropTypes.node,\n  exists: PropTypes.string,\n  delete: PropTypes.string,\n  columnName: PropTypes.node,\n  columnSize: PropTypes.node,\n  columnPreview: PropTypes.node,\n  columnActions: PropTypes.node,\n  ignoreDuplicated: PropTypes.bool,\n  buttonRefresh: PropTypes.shape({\n    title: PropTypes.node,\n    className: PropTypes.string,\n    children: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.arrayOf(PropTypes.node),\n    ]),\n    onClick: PropTypes.func.isRequired,\n  }),\n  buttonUpload: PropTypes.shape({\n    title: PropTypes.node,\n    className: PropTypes.string,\n    children: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.arrayOf(PropTypes.node),\n    ]),\n    onChange: PropTypes.func.isRequired,\n  }),\n  buttonDownload: PropTypes.shape({\n    title: PropTypes.node,\n    className: PropTypes.string,\n    children: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.arrayOf(PropTypes.node),\n    ]),\n    download: PropTypes.oneOfType([\n      PropTypes.bool,\n      PropTypes.string,\n    ]),\n  }),\n  buttonDelete: PropTypes.shape({\n    title: PropTypes.node,\n    className: PropTypes.string,\n    children: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.arrayOf(PropTypes.node),\n    ]),\n    onClick: PropTypes.func.isRequired,\n  }),\n};\n\nexport const defaultProps = {\n  title: 'Files',\n  loading: 'Loading...',\n  deleting: 'Deleting...',\n  uploading: 'Uploading...',\n  error: 'Error',\n  empty: 'No files.',\n  drop: 'Drop files here',\n  exists: 'File already exists. Continue?',\n  delete: 'Do you want to remove the file?',\n  columnName: 'Name',\n  columnSize: 'Size',\n  columnPreview: '',\n  columnActions: '',\n  ignoreDuplicated: true,\n  buttonRefresh: {\n    title: 'Refresh',\n  },\n  buttonUpload: {\n    title: 'Upload file',\n  },\n  buttonDownload: {\n    title: 'Download',\n    target: '_blank',\n    download: true,\n  },\n  buttonDelete: {\n    title: 'Delete',\n  },\n};\n\nfunction formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) {\n    return '0 Bytes';\n  }\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nexport default function FolderBrowser(props) {\n  const [files, setFiles] = useState(null);\n  const [modalFileUrl, setModalFileUrl] = useState(null);\n\n  useEffect(() => setFiles(props.files), [props.files]);\n\n  const buttonRefresh = {...defaultProps.buttonRefresh, ...props.buttonRefresh};\n  const buttonUpload = {...defaultProps.buttonUpload, ...props.buttonUpload};\n  const buttonDownload = {...defaultProps.buttonDownload, ...props.buttonDownload};\n  const buttonDelete = {...defaultProps.buttonDelete, ...props.buttonDelete};\n\n  const {additionalColumns} = props;\n\n  function _handleDrop(files, e) {\n    _handleChange({target: {files}}, files);\n  }\n\n  function _handleChange(e) {\n    const files = e.target.files;\n\n    if (files) {\n      let exists = false;\n\n      // Check if exists\n      for (const file of Array.from(files)) {\n        if (data.find(({name}) => file.name === name)) {\n          exists = true;\n          break;\n        }\n      }\n\n      if (!exists || window.confirm(props.exists)) {\n        buttonUpload.onChange(e, files);\n      }\n\n      e.target.value = null;\n    }\n  }\n\n  function _handleFocus(e, file) {\n    const $el = e.currentTarget;\n\n    const $current = document.querySelector('.folder-browser-item-focused');\n    $current && $current.classList.remove('folder-browser-item-focused');\n\n    $el.classList.add('folder-browser-item-focused');\n  }\n\n  // Filter duplicated\n  const data = files && (\n    !props.ignoreDuplicated ? files : files.filter((a, i) => {\n      const exists = files.find((b) => a.name === b.name);\n      return files.lastIndexOf(exists) === i;\n    })\n  );\n\n  return (\n    <div className=\"folder-browser\">\n      {modalFileUrl && (\n        <div className=\"folder-browser-modal\" onClick={setModalFileUrl.bind(null, null)}>\n          <img src={modalFileUrl} alt=\"\" onClick={(e) => e.stopPropagation()}/>\n          <div onClick={setModalFileUrl.bind(null, null)}>×</div>\n        </div>\n      )}\n      <FileDrop onDrop={_handleDrop}>\n        <div className=\"folder-browser-dragbanner\">\n          {props.drop}\n        </div>\n        <div className=\"folder-browser-header\">\n          <div className=\"folder-browser-title\">\n            {props.title}\n          </div>\n          <div className=\"folder-browser-buttons\">\n            <button\n              className=\"folder-browser-button\"\n              type=\"button\"\n              children={buttonRefresh.title}\n              {...buttonRefresh}\n            />\n            <label className=\"folder-browser-button\" {...buttonUpload} onChange={null}>\n              {buttonUpload.children || buttonUpload.title}\n              <input\n                className=\"folder-browser-input\"\n                type=\"file\"\n                name=\"file\"\n                multiple\n                hidden\n                onChange={_handleChange}\n              />\n            </label>\n          </div>\n        </div>\n        <div className=\"folder-browser-body\">\n\n          {!data ? (\n            <div style={{padding: '0 15px 15px'}}>{props.loading}</div>\n          ) : !data.length ? (\n            <div style={{padding: '0 15px 15px'}}>{props.empty}</div>\n          ) : (\n            <table>\n              <thead>\n              <tr>\n                <th>{props.columnPreview}</th>\n                <th>{props.columnName}</th>\n                <th/>\n\n                {additionalColumns && additionalColumns.map((column, key) => (\n                  <th key={key}>{column.header}</th>\n                ))}\n\n                <th>{props.columnSize}</th>\n                <th>{props.columnActions}</th>\n              </tr>\n              </thead>\n              <tbody>\n\n              {data.map((file, i) => {\n                const isImage = [\n                  'gif', 'ico', 'jpeg', 'jpg', 'png', 'svg', 'tif', 'tiff', 'webp'\n                ].some((ext) => {\n                  return file.name.toLowerCase().endsWith(ext.toLowerCase());\n                });\n\n                return (\n                  <tr key={i} onClick={(e) => _handleFocus(e, file)}>\n                    <td>\n                      {isImage && (\n                        <div style={{\n                          position: 'relative',\n                          backgroundColor: '#eee',\n                          overflow: 'hidden',\n                          height: 38,\n                          width: 38,\n                        }}>\n                          <img\n                            src={file.url}\n                            alt={file.name}\n                            style={{\n                              cursor: 'pointer',\n                              objectFit: 'cover',\n                              height: '100%',\n                              width: '100%',\n                            }}\n                            onClick={setModalFileUrl.bind(null, file.url)}\n                          />\n                        </div>\n                      )}\n                    </td>\n                    <td style={{width: '100%'}}>\n                      <a href={file.url} target={'_blank'} onClick={(e) => {\n                        if (isImage) {\n                          e.preventDefault();\n                          setModalFileUrl(file.url);\n                        }\n                      }}>\n                        {file.name}\n                      </a>\n                    </td>\n                    <td className=\"folder-browser-nowrap\">\n                      {file.uploading && (\n                        <b>{props.uploading}</b>\n                      )}\n                      {file.deleting && (\n                        <b>{props.deleting}</b>\n                      )}\n                      {file.error && (\n                        <div>\n                          <b>{props.error}</b>\n                        </div>\n                      )}\n                    </td>\n\n                    {additionalColumns && additionalColumns.map((column, key) => (\n                      <th key={key}>{column.render(file)}</th>\n                    ))}\n\n                    <td className=\"folder-browser-nowrap\" align=\"right\">\n                      {formatBytes(file.size)}\n                    </td>\n                    <td className=\"folder-browser-nowrap\">\n                      <a\n                        className=\"folder-browser-button\"\n                        children={buttonDownload.title}\n                        {...buttonDownload}\n                        href={file.url}\n                      />\n                      <button\n                        className=\"folder-browser-button\"\n                        type=\"button\"\n                        children={buttonDelete.title}\n                        {...buttonDelete}\n                        onClick={(e) => {\n                          if (window.confirm(props.delete)) {\n                            buttonDelete.onClick(e, file);\n                          }\n                        }}\n                      />\n                    </td>\n                  </tr>\n                );\n              })}\n\n              </tbody>\n            </table>\n          )}\n\n        </div>\n      </FileDrop>\n    </div>\n  );\n\n};\n\nFolderBrowser.propTypes = propTypes;\nFolderBrowser.defaultProps = defaultProps;\n"],"file":"FolderBrowser.js"}