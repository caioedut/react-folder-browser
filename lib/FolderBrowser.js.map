{"version":3,"sources":["../src/FolderBrowser.js"],"names":["defaultProps","title","loading","empty","exists","columnName","columnSize","columnPreview","columnActions","ignoreDuplicated","buttonRefresh","buttonUpload","buttonDownload","target","download","buttonDelete","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","FolderBrowser","props","files","setFiles","_handleFocus","e","file","$el","currentTarget","$current","document","querySelector","classList","remove","add","data","filter","a","find","b","name","lastIndexOf","children","window","confirm","onChange","value","padding","length","map","some","ext","toLowerCase","endsWith","position","backgroundColor","overflow","height","width","url","objectFit","error","size","onClick"],"mappings":"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","sourcesContent":["import './styles.css';\n\nimport React, {useEffect, useState} from 'react';\n\nexport const defaultProps = {\n  title: 'Files',\n  loading: 'Loading...',\n  empty: 'No files.',\n  exists: 'File already exists. Continue?',\n  delete: 'Do you want to remove the file?',\n  columnName: 'Name',\n  columnSize: 'Size',\n  columnPreview: '',\n  columnActions: '',\n  ignoreDuplicated: true,\n  buttonRefresh: {\n    title: 'Refresh',\n  },\n  buttonUpload: {\n    title: 'Upload file',\n  },\n  buttonDownload: {\n    title: 'Download',\n    target: '_blank',\n    download: true,\n  },\n  buttonDelete: {\n    title: 'Delete',\n  },\n};\n\nfunction formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) {\n    return '0 Bytes';\n  }\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nexport default function FolderBrowser(props) {\n  const [files, setFiles] = useState(null);\n\n  useEffect(() => setFiles(props.files), [props.files]);\n\n  const buttonRefresh = {...defaultProps.buttonRefresh, ...props.buttonRefresh};\n  const buttonUpload = {...defaultProps.buttonUpload, ...props.buttonUpload};\n  const buttonDownload = {...defaultProps.buttonDownload, ...props.buttonDownload};\n  const buttonDelete = {...defaultProps.buttonDelete, ...props.buttonDelete};\n\n  function _handleFocus(e, file) {\n    const $el = e.currentTarget;\n\n    const $current = document.querySelector('.folder-browser-item-focused');\n    $current && $current.classList.remove('folder-browser-item-focused');\n\n    $el.classList.add('folder-browser-item-focused');\n  }\n\n  // Filter duplicated\n  const data = files && (\n    !props.ignoreDuplicated ? files : files.filter((a, i) => {\n      const exists = files.find((b) => a.name === b.name);\n      return files.lastIndexOf(exists) === i;\n    })\n  );\n\n  return (\n    <div id=\"folder-browser\">\n      <div id=\"folder-browser-header\">\n        <div id=\"folder-browser-title\">\n          {props.title}\n        </div>\n        <div id=\"folder-browser-buttons\">\n          <button\n            className=\"folder-browser-button\"\n            type=\"button\"\n            children={buttonRefresh.title}\n            {...buttonRefresh}\n          />\n          <label className=\"folder-browser-button\" {...buttonUpload} onChange={null}>\n            {buttonUpload.children || buttonUpload.title}\n            <input\n              type=\"file\"\n              name=\"file\"\n              hidden\n              onChange={(e) => {\n                const files = e.target.files;\n                const exists = data.find(({name}) => name === files[0].name);\n\n                if (!exists || window.confirm(props.exists)) {\n                  buttonUpload.onChange(e, e.target.files);\n                }\n\n                e.target.value = null;\n              }}\n            />\n          </label>\n        </div>\n      </div>\n      <div id=\"folder-browser-body\">\n\n        {!data ? (\n          <div style={{padding: '0 15px 15px'}}>{props.loading}</div>\n        ) : !data.length ? (\n          <div style={{padding: '0 15px 15px'}}>{props.empty}</div>\n        ) : (\n          <table>\n            <thead>\n            <tr>\n              <th>{props.columnPreview}</th>\n              <th>{props.columnName}</th>\n              <th/>\n              <th>{props.columnSize}</th>\n              <th>{props.columnActions}</th>\n            </tr>\n            </thead>\n            <tbody>\n\n            {data.map((file, i) => (\n              <tr key={i} onClick={(e) => _handleFocus(e, file)}>\n                <td>\n                  {[\n                    'gif', 'ico', 'jpeg', 'jpg', 'png', 'svg', 'tif', 'tiff', 'webp'\n                  ].some((ext) => {\n                    return file.name.toLowerCase().endsWith(ext.toLowerCase());\n                  }) && (\n                    <div style={{\n                      position: 'relative',\n                      backgroundColor: '#eee',\n                      overflow: 'hidden',\n                      height: 38,\n                      width: 38,\n                    }}>\n                      <img\n                        src={file.url}\n                        alt={file.name}\n                        style={{\n                          objectFit: 'cover',\n                          height: '100%',\n                          width: '100%',\n                        }}\n                      />\n                    </div>\n                  )}\n                </td>\n                <td style={{width: '100%'}}>\n                  <a href={file.url} target={'_blank'}>\n                    {file.name}\n                  </a>\n                </td>\n                <td className=\"folder-browser-nowrap\">\n                  {file.loading && (\n                    <b>Enviando...</b>\n                  )}\n                  {file.error && (\n                    <div>\n                      <b>Falha no envio</b>\n                    </div>\n                  )}\n                </td>\n                <td className=\"folder-browser-nowrap\">\n                  {formatBytes(file.size)}\n                </td>\n                <td className=\"folder-browser-nowrap\">\n                  <a\n                    className=\"folder-browser-button\"\n                    children={buttonDownload.title}\n                    {...buttonDownload}\n                    href={file.url}\n                  />\n                  <button\n                    className=\"folder-browser-button\"\n                    type=\"button\"\n                    children={buttonDelete.title}\n                    {...buttonDelete}\n                    onClick={(e) => {\n                      if (window.confirm(props.delete)) {\n                        buttonDelete.onClick(e, file);\n                      }\n                    }}\n                  />\n                </td>\n              </tr>\n            ))}\n\n            </tbody>\n          </table>\n        )}\n\n      </div>\n    </div>\n  );\n\n};\n\nFolderBrowser.defaultProps = defaultProps;\n"],"file":"FolderBrowser.js"}