{"version":3,"sources":["../src/FolderBrowser.js"],"names":["defaultProps","title","loading","empty","columnName","columnSize","columnPreview","columnActions","buttonRefresh","buttonUpload","buttonDownload","target","download","buttonDelete","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","FolderBrowser","props","files","setFiles","_handleFocus","e","file","$el","currentTarget","$current","document","querySelector","classList","remove","add","children","onChange","value","padding","length","map","some","ext","name","toLowerCase","endsWith","position","backgroundColor","overflow","height","width","path","objectFit","error","size","onClick"],"mappings":"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","sourcesContent":["import './styles.css';\n\nimport React, {useEffect, useState} from 'react';\n\nexport const defaultProps = {\n  title: 'Files',\n  loading: 'Loading...',\n  empty: 'No files.',\n  columnName: 'Name',\n  columnSize: 'Size',\n  columnPreview: '',\n  columnActions: '',\n  buttonRefresh: {\n    title: 'Refresh',\n  },\n  buttonUpload: {\n    title: 'Upload file',\n  },\n  buttonDownload: {\n    title: 'Download',\n    target: '_blank',\n    download: true,\n  },\n  buttonDelete: {\n    title: 'Delete',\n  },\n};\n\nfunction formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) {\n    return '0 Bytes';\n  }\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nconst FolderBrowser = (props) => {\n  const [files, setFiles] = useState();\n\n  useEffect(() => setFiles(props.files), [props.files]);\n\n  const buttonRefresh = {...defaultProps.buttonRefresh, ...props.buttonRefresh};\n  const buttonUpload = {...defaultProps.buttonUpload, ...props.buttonUpload};\n  const buttonDownload = {...defaultProps.buttonDownload, ...props.buttonDownload};\n  const buttonDelete = {...defaultProps.buttonDelete, ...props.buttonDelete};\n\n  function _handleFocus(e, file) {\n    const $el = e.currentTarget;\n\n    const $current = document.querySelector('.folder-browser-item-focused');\n    $current && $current.classList.remove('folder-browser-item-focused');\n\n    $el.classList.add('folder-browser-item-focused');\n  }\n\n  return (\n    <div id=\"folder-browser\">\n      <div id=\"folder-browser-header\">\n        <div id=\"folder-browser-title\">\n          {props.title}\n        </div>\n        <div id=\"folder-browser-buttons\">\n          <button\n            className=\"folder-browser-button\"\n            type=\"button\"\n            children={buttonRefresh.title}\n            {...buttonRefresh}\n          />\n          <label className=\"folder-browser-button\" {...buttonUpload} onChange={null}>\n            {buttonUpload.children || buttonUpload.title}\n            <input\n              type=\"file\"\n              name=\"file\"\n              hidden\n              onChange={(e) => {\n                buttonUpload.onChange(e, e.target.files);\n                e.target.value = null;\n              }}\n            />\n          </label>\n        </div>\n      </div>\n      <div id=\"folder-browser-body\">\n\n        {!files ? (\n          <div style={{padding: '0 15px 15px'}}>{props.loading}</div>\n        ) : !files.length ? (\n          <div style={{padding: '0 15px 15px'}}>{props.empty}</div>\n        ) : (\n          <table>\n            <thead>\n            <tr>\n              <th>{props.columnPreview}</th>\n              <th>{props.columnName}</th>\n              <th/>\n              <th>{props.columnSize}</th>\n              <th>{props.columnActions}</th>\n            </tr>\n            </thead>\n            <tbody>\n\n            {files.map((file, i) => (\n              <tr key={i} onClick={(e) => _handleFocus(e, file)}>\n                <td>\n                  {[\n                    'gif', 'ico', 'jpeg', 'jpg', 'png', 'svg', 'tif', 'tiff', 'webp'\n                  ].some((ext) => {\n                    return file.name.toLowerCase().endsWith(ext.toLowerCase());\n                  }) && (\n                    <div style={{\n                      position: 'relative',\n                      backgroundColor: '#eee',\n                      overflow: 'hidden',\n                      height: 38,\n                      width: 38,\n                    }}>\n                      <img\n                        src={file.path}\n                        alt={file.name}\n                        style={{\n                          objectFit: 'cover',\n                          height: '100%',\n                          width: '100%',\n                        }}\n                      />\n                    </div>\n                  )}\n                </td>\n                <td style={{width: '100%'}}>\n                  <a href={file.path} target={'_blank'}>\n                    {file.name}\n                  </a>\n                </td>\n                <td>\n                  {file.loading && (\n                    <b>Enviando...</b>\n                  )}\n                  {file.error && (\n                    <div>\n                      <b>Falha no envio</b>\n                    </div>\n                  )}\n                </td>\n                <td className=\"folder-browser-nowrap\">\n                  {formatBytes(file.size)}\n                </td>\n                <td className=\"folder-browser-nowrap\">\n                  <a\n                    className=\"folder-browser-button\"\n                    children={buttonDownload.title}\n                    {...buttonDownload}\n                    href={file.path}\n                  />\n                  <button\n                    className=\"folder-browser-button\"\n                    type=\"button\"\n                    children={buttonDelete.title}\n                    {...buttonDelete}\n                    onClick={(e) => buttonDelete.onClick(e, file)}\n                  />\n                </td>\n              </tr>\n            ))}\n\n            </tbody>\n          </table>\n        )}\n\n      </div>\n    </div>\n  );\n\n};\n\nFolderBrowser.defaultProps = defaultProps;\n\nexport default FolderBrowser;\n"],"file":"FolderBrowser.js"}